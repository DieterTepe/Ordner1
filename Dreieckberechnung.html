<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dreiecksberechnung</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f0f8ff;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        .input-group {
            margin-bottom: 20px;
        }

        .radio-group {
            display: flex;
            gap: 15px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }

        .input-field {
            margin: 10px 0;
        }

        input[type="number"] {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin: 20px 0;
        }

        button:hover {
            background-color: #45a049;
        }

        .results {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 4px;
            margin-top: 20px;
        }

        .drawing-container {
            width: 100%;
            height: 300px;
            background-color: black;
            margin-top: 20px;
            position: relative;
        }

        .error {
            color: red;
            margin-top: 10px;
        }

        .scale-info {
            color: white;
            position: absolute;
            top: 10px;
            left: 10px;
        }

        .result-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 20px;
        }

        .result-item {
            background-color: #e9ecef;
            padding: 10px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Dreiecksberechnung</h1>
        
        <div class="input-group">
            <h3>Eingabe 1:</h3>
            <div class="radio-group">
                <label><input type="radio" name="input1" value="a"> Seite a</label>
                <label><input type="radio" name="input1" value="b"> Seite b</label>
                <label><input type="radio" name="input1" value="c"> Seite c</label>
                <label><input type="radio" name="input1" value="alpha"> Winkel α</label>
                <label><input type="radio" name="input1" value="beta"> Winkel β</label>
                <label><input type="radio" name="input1" value="gamma"> Winkel γ</label>
            </div>
            <div class="input-field">
                <input type="number" id="value1" step="0.01" placeholder="Wert 1">
            </div>
        </div>

        <div class="input-group">
            <h3>Eingabe 2:</h3>
            <div class="radio-group">
                <label><input type="radio" name="input2" value="a"> Seite a</label>
                <label><input type="radio" name="input2" value="b"> Seite b</label>
                <label><input type="radio" name="input2" value="c"> Seite c</label>
                <label><input type="radio" name="input2" value="alpha"> Winkel α</label>
                <label><input type="radio" name="input2" value="beta"> Winkel β</label>
                <label><input type="radio" name="input2" value="gamma"> Winkel γ</label>
            </div>
            <div class="input-field">
                <input type="number" id="value2" step="0.01" placeholder="Wert 2">
            </div>
        </div>

        <div class="input-group">
            <h3>Eingabe 3:</h3>
            <div class="radio-group">
                <label><input type="radio" name="input3" value="a"> Seite a</label>
                <label><input type="radio" name="input3" value="b"> Seite b</label>
                <label><input type="radio" name="input3" value="c"> Seite c</label>
                <label><input type="radio" name="input3" value="alpha"> Winkel α</label>
                <label><input type="radio" name="input3" value="beta"> Winkel β</label>
                <label><input type="radio" name="input3" value="gamma"> Winkel γ</label>
            </div>
            <div class="input-field">
                <input type="number" id="value3" step="0.01" placeholder="Wert 3">
            </div>
        </div>

        <button onclick="calculateTriangle()">Dreieck berechnen</button>

        <div id="error" class="error"></div>

        <div class="results" id="results">
            <div class="result-grid">
                <div class="result-item">Seite a: <span id="side-a">-</span></div>
                <div class="result-item">Winkel α: <span id="angle-alpha">-</span>°</div>
                <div class="result-item">Seite b: <span id="side-b">-</span></div>
                <div class="result-item">Winkel β: <span id="angle-beta">-</span>°</div>
                <div class="result-item">Seite c: <span id="side-c">-</span></div>
                <div class="result-item">Winkel γ: <span id="angle-gamma">-</span>°</div>
                <div class="result-item">Inkreis Ø: <span id="inradius">-</span></div>
                <div class="result-item">Umkreis Ø: <span id="circumradius">-</span></div>
                <div class="result-item">Höhe ha: <span id="height-a">-</span></div>
                <div class="result-item">Höhe hb: <span id="height-b">-</span></div>
                <div class="result-item">Höhe hc: <span id="height-c">-</span></div>
            </div>
        </div>

        <div class="drawing-container" id="triangle-canvas">
            <div class="scale-info" id="scale-info"></div>
            <canvas id="canvas"></canvas>
        </div>
    </div>

 <script>
function calculateTriangle() {
    const errorElement = document.getElementById('error');
    errorElement.textContent = '';

    // 1. Eingaben sammeln und initialisieren
    let values = {
        a: null,
        b: null,
        c: null,
        alpha: null,
        beta: null,
        gamma: null
    };

    // Radio-Button-Werte und zugehörige Werte auslesen
    ['input1', 'input2', 'input3'].forEach((inputName, index) => {
        const selected = document.querySelector(`input[name="${inputName}"]:checked`)?.value;
        const value = parseFloat(document.getElementById(`value${index + 1}`).value);
        
        if (selected && !isNaN(value)) {
            switch(selected) {
                case 'a': values.a = value; break;
                case 'b': values.b = value; break;
                case 'c': values.c = value; break;
                case 'alpha': values.alpha = value * Math.PI / 180; break;
                case 'beta': values.beta = value * Math.PI / 180; break;
                case 'gamma': values.gamma = value * Math.PI / 180; break;
            }
        }
    });

    // 2. Grundlegende Validierung
    let validCount = Object.values(values).filter(v => v !== null).length;
    if (validCount < 3) {
        errorElement.textContent = 'Bitte geben Sie mindestens drei gültige Werte ein.';
        return;
    }

    // 3. Iterative Berechnung aller Werte
    let iterations = 0;
    const MAX_ITERATIONS = 10;

    while (!isTriangleComplete(values) && iterations < MAX_ITERATIONS) {
        const prevValues = {...values};
        
        // 3.1 Winkelberechnungen
        if (values.alpha && values.beta && !values.gamma) {
            values.gamma = Math.PI - values.alpha - values.beta;
        }
        if (values.alpha && values.gamma && !values.beta) {
            values.beta = Math.PI - values.alpha - values.gamma;
        }
        if (values.beta && values.gamma && !values.alpha) {
            values.alpha = Math.PI - values.beta - values.gamma;
        }

        // 3.2 Sinussatz Anwendungen
        if (values.a && values.alpha) {
            if (values.beta && !values.b) {
                values.b = values.a * Math.sin(values.beta) / Math.sin(values.alpha);
            }
            if (values.gamma && !values.c) {
                values.c = values.a * Math.sin(values.gamma) / Math.sin(values.alpha);
            }
        }
        if (values.b && values.beta) {
            if (values.alpha && !values.a) {
                values.a = values.b * Math.sin(values.alpha) / Math.sin(values.beta);
            }
            if (values.gamma && !values.c) {
                values.c = values.b * Math.sin(values.gamma) / Math.sin(values.beta);
            }
        }
        if (values.c && values.gamma) {
            if (values.alpha && !values.a) {
                values.a = values.c * Math.sin(values.alpha) / Math.sin(values.gamma);
            }
            if (values.beta && !values.b) {
                values.b = values.c * Math.sin(values.beta) / Math.sin(values.gamma);
            }
        }

        // 3.3 Kosinussatz Anwendungen
        if (values.b && values.c && !values.a && values.alpha) {
            values.a = Math.sqrt(values.b**2 + values.c**2 - 2*values.b*values.c*Math.cos(values.alpha));
        }
        if (values.a && values.c && !values.b && values.beta) {
            values.b = Math.sqrt(values.a**2 + values.c**2 - 2*values.a*values.c*Math.cos(values.beta));
        }
        if (values.a && values.b && !values.c && values.gamma) {
            values.c = Math.sqrt(values.a**2 + values.b**2 - 2*values.a*values.b*Math.cos(values.gamma));
        }

        // 3.4 Winkelberechnung mit Kosinussatz
        if (values.a && values.b && values.c) {
            if (!values.alpha) {
                values.alpha = Math.acos((values.b**2 + values.c**2 - values.a**2)/(2*values.b*values.c));
            }
            if (!values.beta) {
                values.beta = Math.acos((values.a**2 + values.c**2 - values.b**2)/(2*values.a*values.c));
            }
            if (!values.gamma) {
                values.gamma = Math.acos((values.a**2 + values.b**2 - values.c**2)/(2*values.a*values.b));
            }
        }

        // Prüfe auf Fortschritt
        if (JSON.stringify(prevValues) === JSON.stringify(values)) {
            break;
        }

        iterations++;
    }

    // 4. Validierung des berechneten Dreiecks
    if (!validateTriangle(values)) {
        errorElement.textContent = 'Die eingegebenen Werte ergeben kein gültiges Dreieck.';
        return;
    }

    // 5. Zusätzliche Berechnungen
    const s = (values.a + values.b + values.c) / 2; // Halbumfang
    const area = Math.sqrt(s * (s - values.a) * (s - values.b) * (s - values.c));

    // Höhen
    const heights = {
        ha: 2 * area / values.a,
        hb: 2 * area / values.b,
        hc: 2 * area / values.c
    };

    // Inkreis- und Umkreisradius
    const inradius = area / s;
    const circumradius = values.a * values.b * values.c / (4 * area);

    // 6. Ergebnisse anzeigen
    document.getElementById('side-a').textContent = values.a.toFixed(2);
    document.getElementById('side-b').textContent = values.b.toFixed(2);
    document.getElementById('side-c').textContent = values.c.toFixed(2);
    document.getElementById('angle-alpha').textContent = (values.alpha * 180 / Math.PI).toFixed(2);
    document.getElementById('angle-beta').textContent = (values.beta * 180 / Math.PI).toFixed(2);
    document.getElementById('angle-gamma').textContent = (values.gamma * 180 / Math.PI).toFixed(2);
    document.getElementById('height-a').textContent = heights.ha.toFixed(2);
    document.getElementById('height-b').textContent = heights.hb.toFixed(2);
    document.getElementById('height-c').textContent = heights.hc.toFixed(2);
    document.getElementById('inradius').textContent = inradius.toFixed(2);
    document.getElementById('circumradius').textContent = circumradius.toFixed(2);

    // 7. Dreieck zeichnen
    drawTriangle(values.a, values.b, values.c, values.alpha, values.beta, values.gamma, 
                circumradius, inradius);
}

function isTriangleComplete(values) {
    return values.a && values.b && values.c && 
           values.alpha && values.beta && values.gamma;
}

function validateTriangle(values) {
    // Winkelsumme prüfen
    const angleSum = values.alpha + values.beta + values.gamma;
    if (Math.abs(angleSum - Math.PI) > 0.001) return false;

    // Dreiecksungleichung prüfen
    if (values.a + values.b <= values.c) return false;
    if (values.b + values.c <= values.a) return false;
    if (values.a + values.c <= values.b) return false;

    return true;
}

function drawTriangle(a, b, c, alpha, beta, gamma, circumradius, inradius) {
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const container = document.getElementById('triangle-canvas');
    const width = container.clientWidth;
    const height = container.clientHeight;
    canvas.width = width;
    canvas.height = height;

    ctx.clearRect(0, 0, width, height);

    // Berechne einen einheitlichen Maßstab basierend auf der längsten Seite
    const maxSide = Math.max(a, b, c);
    const margin = 40;
    const scale = Math.min(
        (width - 2 * margin) / maxSide,
        (height - 2 * margin) / maxSide
    );

    // Platziere Punkt A als Startpunkt
    const Ax = 0;
    const Ay = 0;

    // Platziere Punkt B auf der x-Achse mit exakter Länge c
    const Bx = c * scale;  // Exakte Länge der Seite c
    const By = 0;

    // Berechne Punkt C mit exakter Länge a und Winkel alpha
    const Cx = a * Math.cos(alpha) * scale;  // Exakte x-Position mit Maßstab
    const Cy = a * Math.sin(alpha) * scale;  // Exakte y-Position mit Maßstab

    // Verschiebe das gesamte Dreieck in die Mitte des Canvas
    const centerX = (Ax + Bx + Cx) / 3;
    const centerY = (Ay + By + Cy) / 3;

    // Berechne die finalen Koordinaten mit Zentrierung
    const canvasCenterX = width / 2;
    const canvasCenterY = height / 2;

    const A = {
        x: canvasCenterX + (Ax - centerX),
        y: canvasCenterY - (Ay - centerY)  // Negativ wegen Canvas-Koordinatensystem
    };
    const B = {
        x: canvasCenterX + (Bx - centerX),
        y: canvasCenterY - (By - centerY)
    };
    const C = {
        x: canvasCenterX + (Cx - centerX),
        y: canvasCenterY - (Cy - centerY)
    };

    // Zeichne Umkreis
    ctx.beginPath();
    ctx.arc(canvasCenterX, canvasCenterY, circumradius * scale, 0, 2 * Math.PI);
    ctx.strokeStyle = 'red';
    ctx.stroke();

    // Zeichne Dreieck mit exakten Längen
    ctx.beginPath();
    ctx.moveTo(A.x, A.y);
    ctx.lineTo(B.x, B.y);
    ctx.lineTo(C.x, C.y);
    ctx.closePath();
    ctx.strokeStyle = 'white';
    ctx.stroke();

    // Zeichne Inkreis
    const inkreisMittelpunkt = {
        x: (a*A.x + b*B.x + c*C.x)/(a + b + c),
        y: (a*A.y + b*B.y + c*C.y)/(a + b + c)
    };
    
    ctx.beginPath();
    ctx.arc(inkreisMittelpunkt.x, inkreisMittelpunkt.y, inradius * scale, 0, 2 * Math.PI);
    ctx.strokeStyle = 'green';
    ctx.stroke();

    // Beschriftungen
    ctx.font = '14px Arial';
    
    // Winkel beschriften
    ctx.fillStyle = 'yellow';
    const angleFormat = (angle) => (angle * 180 / Math.PI).toFixed(2) + '°';
    
    ctx.fillText(`α: ${angleFormat(alpha)}`, A.x - 60, A.y);
    ctx.fillText(`β: ${angleFormat(beta)}`, B.x + 10, B.y);
    ctx.fillText(`γ: ${angleFormat(gamma)}`, C.x, C.y - 10);

    // Seiten beschriften mit exakten Längen
    ctx.fillStyle = 'white';
    ctx.fillText(`a: ${a.toFixed(2)}`, (B.x + C.x)/2 - 20, (B.y + C.y)/2);
    ctx.fillText(`b: ${b.toFixed(2)}`, (A.x + C.x)/2 - 20, (A.y + C.y)/2);
    ctx.fillText(`c: ${c.toFixed(2)}`, (A.x + B.x)/2, A.y + 25);

    // Maßstab anzeigen
    document.getElementById('scale-info').textContent = 
        `Maßstab: 1 Einheit = ${(1/scale).toFixed(2)} Pixel`;
}

    function calculateTriangle() {
        const errorElement = document.getElementById('error');
        errorElement.textContent = '';

        // 1. Eingaben sammeln und initialisieren
        let values = {
            a: null,
            b: null,
            c: null,
            alpha: null,
            beta: null,
            gamma: null
        };

        // Radio-Button-Werte und zugehörige Werte auslesen
        ['input1', 'input2', 'input3'].forEach((inputName, index) => {
            const selected = document.querySelector(`input[name="${inputName}"]:checked`)?.value;
            const value = parseFloat(document.getElementById(`value${index + 1}`).value);
            
            if (selected && !isNaN(value)) {
                switch(selected) {
                    case 'a': values.a = value; break;
                    case 'b': values.b = value; break;
                    case 'c': values.c = value; break;
                    case 'alpha': values.alpha = value * Math.PI / 180; break;
                    case 'beta': values.beta = value * Math.PI / 180; break;
                    case 'gamma': values.gamma = value * Math.PI / 180; break;
                }
            }
        });

        // 2. Grundlegende Validierung
        if (!validateInputs(values)) {
            errorElement.textContent = 'Bitte geben Sie mindestens drei gültige Werte ein.';
            return;
        }

        // 3. Iterative Berechnung
        let iterations = 0;
        const maxIterations = 10;
        
        while (!isTriangleComplete(values) && iterations < maxIterations) {
            const prevValues = {...values};
            
            // 3.1 Winkelberechnungen
            if (values.alpha && values.beta && !values.gamma) {
                values.gamma = Math.PI - values.alpha - values.beta;
            }
            if (values.alpha && values.gamma && !values.beta) {
                values.beta = Math.PI - values.alpha - values.gamma;
            }
            if (values.beta && values.gamma && !values.alpha) {
                values.alpha = Math.PI - values.beta - values.gamma;
            }

            // 3.2 Sinussatz Berechnungen
            if (values.a && values.alpha) {
                if (values.beta && !values.b) {
                    values.b = values.a * Math.sin(values.beta) / Math.sin(values.alpha);
                }
                if (values.gamma && !values.c) {
                    values.c = values.a * Math.sin(values.gamma) / Math.sin(values.alpha);
                }
            }
            if (values.b && values.beta) {
                if (values.alpha && !values.a) {
                    values.a = values.b * Math.sin(values.alpha) / Math.sin(values.beta);
                }
                if (values.gamma && !values.c) {
                    values.c = values.b * Math.sin(values.gamma) / Math.sin(values.beta);
                }
            }
            if (values.c && values.gamma) {
                if (values.alpha && !values.a) {
                    values.a = values.c * Math.sin(values.alpha) / Math.sin(values.gamma);
                }
                if (values.beta && !values.b) {
                    values.b = values.c * Math.sin(values.beta) / Math.sin(values.gamma);
                }
            }

            // 3.3 Kosinussatz Berechnungen
            if (values.b && values.c && !values.a && values.alpha) {
                values.a = Math.sqrt(values.b**2 + values.c**2 - 2*values.b*values.c*Math.cos(values.alpha));
            }
            if (values.a && values.c && !values.b && values.beta) {
                values.b = Math.sqrt(values.a**2 + values.c**2 - 2*values.a*values.c*Math.cos(values.beta));
            }
            if (values.a && values.b && !values.c && values.gamma) {
                values.c = Math.sqrt(values.a**2 + values.b**2 - 2*values.a*values.b*Math.cos(values.gamma));
            }

            // 3.4 Winkelberechnung mit Kosinussatz
            if (values.a && values.b && values.c) {
                if (!values.alpha) {
                    values.alpha = Math.acos((values.b**2 + values.c**2 - values.a**2)/(2*values.b*values.c));
                }
                if (!values.beta) {
                    values.beta = Math.acos((values.a**2 + values.c**2 - values.b**2)/(2*values.a*values.c));
                }
                if (!values.gamma) {
                    values.gamma = Math.acos((values.a**2 + values.b**2 - values.c**2)/(2*values.a*values.b));
                }
            }

            iterations++;
            
            // Prüfen ob neue Werte berechnet wurden
            if (JSON.stringify(prevValues) === JSON.stringify(values)) break;
        }

        // 4. Finale Validierung
        if (!validateTriangle(values)) {
            errorElement.textContent = 'Die eingegebenen Werte ergeben kein gültiges Dreieck.';
            return;
        }

        // 5. Zusätzliche Berechnungen
        const s = (values.a + values.b + values.c) / 2; // Halbumfang
        const area = Math.sqrt(s * (s - values.a) * (s - values.b) * (s - values.c));

        // Höhen
        const heights = {
            ha: 2 * area / values.a,
            hb: 2 * area / values.b,
            hc: 2 * area / values.c
        };

        // In- und Umkreisradius
        const inradius = area / s;
        const circumradius = values.a * values.b * values.c / (4 * area);

        // 6. Ergebnisse anzeigen
        updateResults(values, heights, inradius, circumradius);

        // 7. Dreieck zeichnen
        drawTriangle(values.a, values.b, values.c, values.alpha, values.beta, values.gamma, 
                    circumradius, inradius);
    }

    function validateInputs(values) {
        let validCount = 0;
        for (let key in values) {
            if (values[key] !== null && !isNaN(values[key])) validCount++;
        }
        return validCount >= 3;
    }

    function isTriangleComplete(values) {
        return values.a && values.b && values.c && 
               values.alpha && values.beta && values.gamma;
    }

    function validateTriangle(values) {
        // Winkelsumme prüfen
        const angleSum = values.alpha + values.beta + values.gamma;
        if (Math.abs(angleSum - Math.PI) > 0.001) return false;

        // Dreiecksungleichung prüfen
        if (values.a + values.b <= values.c) return false;
        if (values.b + values.c <= values.a) return false;
        if (values.c + values.a <= values.b) return false;

        return true;
    }

    function updateResults(values, heights, inradius, circumradius) {
        document.getElementById('side-a').textContent = values.a.toFixed(2);
        document.getElementById('side-b').textContent = values.b.toFixed(2);
        document.getElementById('side-c').textContent = values.c.toFixed(2);
        document.getElementById('angle-alpha').textContent = (values.alpha * 180 / Math.PI).toFixed(2);
        document.getElementById('angle-beta').textContent = (values.beta * 180 / Math.PI).toFixed(2);
        document.getElementById('angle-gamma').textContent = (values.gamma * 180 / Math.PI).toFixed(2);
        document.getElementById('height-a').textContent = heights.ha.toFixed(2);
        document.getElementById('height-b').textContent = heights.hb.toFixed(2);
        document.getElementById('height-c').textContent = heights.hc.toFixed(2);
        document.getElementById('inradius').textContent = inradius.toFixed(2);
        document.getElementById('circumradius').textContent = circumradius.toFixed(2);
    }
</script>

</body>
</html>





